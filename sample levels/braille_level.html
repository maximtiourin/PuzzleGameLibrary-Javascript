<!DOCTYPE html>
<html>
<style>
    html,
    body {
        width: 100%;
        height: 100%;
        margin: 0px;
        border: 0;
        overflow: hidden;
        /*  Disable scrollbars */
        
        display: block;
        /* No floating content on sides */
    }
</style>

<head>
    <body style="background-color:lightseagreen">
        <title>Braille Level</title>
        <script src="http://code.createjs.com/easeljs-0.7.0.min.js"></script>
        <script>
            var stage;
            var clueText = "you made it this far! BRailliant!";
            var sW = window.innerWidth;
            var sH = window.innerHeight;
            var rad = sW / 20;
            var bools = new Array(true, true, true, true, true, true, true, true, true, true, true, true);
            var answer = new Array(true, true, false, false, false, false, true, true, true, false, true, false);
            var answer2 = new Array(false, false, false, false, false, false, false, false, false, false, false, false);
            var label;
            var midCircle;
            var midCont;
            var clueShow = true;

            function init() {
                stage = new createjs.Stage("demoCanvas");
                stage.canvas.width = sW;
                stage.canvas.height = sH;

                var c1 = createShape(sW / 10, sH / 6.5, rad, 1);
                var c2 = createShape(sW / 10, sH / 2, rad, 2);
                var c3 = createShape(sW / 10, sH / 1.2, rad, 3);

                var c4 = createShape(sW / 4, sH / 6.5, rad, 4);
                var c5 = createShape(sW / 4, sH / 2, rad, 5);
                var c6 = createShape(sW / 4, sH / 1.2, rad, 6);

                var c7 = createShape(sW / 1.34, sH / 6.5, rad, 7);
                var c8 = createShape(sW / 1.34, sH / 2, rad, 8);
                var c9 = createShape(sW / 1.34, sH / 1.2, rad, 9);

                var c10 = createShape(sW / 1.115, sH / 6.5, rad, 10);
                var c11 = createShape(sW / 1.115, sH / 2, rad, 11);
                var c12 = createShape(sW / 1.115, sH / 1.2, rad, 12);

                var answerButton = new createjs.Shape();
                answerButton.graphics.beginFill("indianred").drawCircle(sW / 2, sH / 2, rad / 2);
                answerButton.on("click", function() {
                    // Link to next puzzle
                    alert("completed");
                });
                stage.addChild(answerButton);

                clue = new createjs.Text("", "Bold 35px Calibri", "#FFFFFF");
                clue.x = sW / 2;
                clue.y = sH / 3;
                clue.textAlign = "center";
                clue.textBaseline = "middle";
                stage.addChild(clue);

                midCircle = new createjs.Shape();
                midCircle.graphics.beginFill("salmon").drawCircle(sW / 2, sH / 2, rad);

                label = new createjs.Text("?", "Bold 155px Calibri", "#FFFFFF");
                label.textAlign = "center";
                label.textBaseline = "middle";
                label.x = sW / 2;
                label.y = sH / 2;

                midCircle.on("click", function() {
                    if (clueShow) {
                        clue.text = clueText;
                    } else {
                        clue.text = "";
                    }
                    clueShow = !clueShow;
                    stage.update();
                });

                midCont = new createjs.Container();
                midCont.addChild(midCircle, label);
                stage.addChild(midCont);
                stage.update();
            }

            function handleAnswer() {
                clue.text = "";
                stage.update();
                midCircle.removeAllEventListeners();

                midCont.on("click", function(evt) {
                    createjs.Ticker.on("tick", tick);
                    createjs.Ticker.setFPS(60);
                    stage.update();
                });

                function tick(event) {
                    midCont.y = midCont.y + 5;
                    midCont.x = midCont.x + 9;
                    midCont.scaleX = midCont.scaleX * .99;
                    midCont.scaleY = midCont.scaleY * .99;
                    stage.update(event);
                }
            }

            function createShape(sW, sH, rad, b) {
                var circle = new createjs.Shape();

                circle.graphics.beginFill("salmon").drawCircle(sW, sH, rad);
                circle.on("click", function() {
                    swapColors(circle, sW, sH, rad, b);
                });
                stage.addChild(circle);
                return circle;
            }

            function swapColors(circle, sW, sH, rad, b) {
                if (bools[b - 1]) {
                    circle.graphics.clear().beginFill("gainsboro").drawCircle(sW, sH, rad).endFill();
                } else {
                    circle.graphics.clear().beginFill("salmon").drawCircle(sW, sH, rad).endFill();
                }
                bools[b - 1] = !bools[b - 1];
                stage.update();
                checkAnswer();

                // only allow the user to click once
                /* if (bools[b - 1]) {
                    circle.graphics.clear().beginFill("gainsboro").drawCircle(sW, sH, rad).endFill();
					 bools[b - 1] = !bools[b - 1];
                }               
                stage.update(); */
            }

            function checkAnswer() {
                var b1 = bools.toString();
                var b2 = answer.toString();
                var b3 = answer2.toString();

                if (b1 == b2) {
                    clue.text = "";
                    label.text = "!";
                    clueShow = true;
                    clueText = "Are you really blind? The blind can't see anything.";
                    stage.update();
                }
                if (b1 == b3 && label.text == "!") {
                    label.text = "!!";
                    handleAnswer();
                    stage.update();
                }
            }
        </script>
</head>

<body onload="init();">
    <canvas id="demoCanvas" width="500" height="200">
        alternate content
    </canvas>
</body>

</html>