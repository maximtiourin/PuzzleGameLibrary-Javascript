<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="https://code.createjs.com/createjs-2015.05.21.min.js"></script>
    <script>
        var stage;
        var canvas;
        var size=30;
        var number_of_frog=4
        var x_location=[];
        var is_occupied=[];
        var frogs=[];
//        var texts=[];


        function init()
        {
            canvas = document.getElementById("canvas");
            stage = new createjs.Stage(canvas);

            for (var i=0;i<number_of_frog+1;i++ )
            {
                temp_x=canvas.width*i/(number_of_frog+1);
                x_location.push(temp_x);


                //stones
                var stone = new createjs.Shape();
                stone.graphics.beginFill("DeepSkyBlue").drawCircle(canvas.width/(number_of_frog*2+2),0, size);
                stone.x= temp_x;
                stone.y = canvas.height*3/5;
                stage.addChild(stone);

                //frogs
                if (i!=number_of_frog/2)
                {
                    var frog = new createjs.Shape();
                    frogs.push(frog);
                    var color;
                    if(i<number_of_frog/2)
                    {
                        color="LightGreen"
                        frog.addEventListener("click",green_frog);
                        frog.name="green";
                    }
                    else if (i>number_of_frog/2)
                    {
                        color="Pink"
                        frog.addEventListener("click",pink_frog);
                        frog.name="pink";
                    }
                    frog.graphics.beginFill(color).drawCircle(canvas.width/(number_of_frog*2+2),0, size);
                    //id stores current location
                    frog.id=i;
                    is_occupied[i]=true;
                    frog.x= temp_x;
                    frog.y = canvas.height*3/5 - size;
                    stage.addChild(frog);
                }
                else
                {
                    is_occupied[i]=false;
                }


//                var text = new createjs.Text("True");
//                text.x=temp_x+canvas.width/14-text.getBounds().width/2;
//                text.y= 100;
//                texts.push(text);
//                stage.addChild(text);
            }
//            update_text();

            stage.update();
        }

        function green_frog(event)
        {
            var frog = event.target;
            if(is_occupied[frog.id+1]==false)
            {
                is_occupied[frog.id]=false;
                is_occupied[frog.id+1]=true;
                frog.x=x_location[frog.id+1];
                frog.id=frog.id+1;
            }
            else if (is_occupied[frog.id+2]==false)
            {
                is_occupied[frog.id]=false;
                is_occupied[frog.id+2]=true;
                frog.x=x_location[frog.id+2];
                frog.id=frog.id+2;
            }
//            update_text();
            frog.parent.addChild(frog);
            stage.update();
            check_win();
        }

        function pink_frog(event)
        {
            var frog = event.target;
            if(is_occupied[frog.id-1]==false)
            {
                is_occupied[frog.id]=false;
                is_occupied[frog.id-1]=true;
                frog.x=x_location[frog.id-1];
                frog.id=frog.id-1;
            }
            else if (is_occupied[frog.id-2]==false)
            {
                is_occupied[frog.id]=false;
                is_occupied[frog.id-2]=true;
                frog.x=x_location[frog.id-2];
                frog.id=frog.id-2;
            }
//            update_text();
            frog.parent.addChild(frog);
            stage.update();
            check_win();
        }

//        //help to debug
//        function update_text()
//        {
//            for (var i=0;i<7;i++)
//            {
//                texts[i].text=is_occupied[i];
//            }
//        }

        function check_win()
        {
            var done=0;
            for (var i=0;i<frogs.length;i++)
            {
                if (i<number_of_frog/2 && frogs[i].id>number_of_frog/2)
                        done=done+1;
                else if (frogs[i].id<number_of_frog/2)
                        done=done+1;
            }

            if (done==number_of_frog)
            {
                ///do-something
                //e.g. alert
                alert("Congratulation, you did it!");
                stage.removeAllChildren();
                var text =  new createjs.Text("Congratulation, you did it!", "50px Arial");
                text.x= canvas.width/2 - text.getBounds().width/2;
                text.y = canvas.height/2 - text.getBounds().height/2;
                stage.addChild(text);
                stage.update();
            }
        }



    </script>
</head>
<body onload="init();">
<canvas id="canvas" width="700" height="500" style="background-color:#a6a8a9"></canvas>
</body>
</html>