<!DOCTYPE HTML>
<html>
<title>Easel Test2</title>
  <head>
    <script src="https://code.createjs.com/easeljs-0.8.0.min.js"></script>
    <script>
    	var canvas;
    	var stage;
    	var bitmap;
    	var update = true;


      function init()
      {
      	//<script src="lib/GNPlib.js">
      	canvas = document.getElementById("canvas");
        stage = new createjs.Stage(canvas);


        //drawing circle
        var circle = new createjs.Shape();
        circle.graphics.beginFill("DeepSkyBlue").drawCircle(0, 0, 50);
        circle.x = 100;
        circle.y = 100;
//        circle.addEventListener("click", clicked);
        circle.addEventListener("click", function(event) { alert("clicked"); })
        stage.addChild(circle);
        stage.update();


        //putting a text
        var text = new createjs.Text("Hello World", "20px Arial", "#000000");
		text.y = 20;
		text.textBaseline = "alphabetic";
		stage.addChild(text);

        var image = new Image();
        image.src = "gnp.jpg";
        image.onload = handleImageLoad;
      }

//      function clicked(event)
//      {
//          alert("ha");
//      }

      function handleImageLoad(event)
      {
          var image = event.target;
          bitmap = new createjs.Bitmap(image);
          bitmap.scaleX= 0.3;
          bitmap.scaleY=0.3;
          bitmap.x = canvas.width/2 - image.width/2;
          bitmap.y = canvas.height/2 - image.height/2;
          bitmap.on("pressmove", function (evt)
          {
              this.x = stage.mouseX;
              this.y = stage.mouseY;
              // indicate that the stage should be updated on the next tick:
              // update = true;
          });
//          bitmap.addEventListener("click", clicked);
          stage.addChild(bitmap);



          createjs.Ticker.addEventListener("tick", handleTick);
      }

	function handleTick(event)
	{
//		 if(bitmap.x<=0)
//		 {
//		 	bitmap.x=700;
//		 	bitmap.y=Math.random() * (canvas.height - bitmap.image.height*0.3);
//		 }
//		 else
//		 {
//		 	bitmap.x = bitmap.x - 100;
//		 }
		// bitmap.x += (stage.mouseX - bitmap.x);
		// bitmap.y += (stage.mouseY - bitmap.y);
		// if(update)
		// {
			update=false;
			stage.update();
		// }
	}


    </script>
  </head>
  <body onload="init();">
    <canvas id="canvas" width="700" height="500" style="background-color:lightgrey"></canvas>
  </body>
</html>